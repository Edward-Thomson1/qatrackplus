{% extends "site_base.html" %}

{% load staticfiles %}
{% load qa_tags %}


{% block body %}
    <div class="row-fluid">
        <div class="span12">
            <h2>{{page_title}}</h2>
        </div>
    </div>
	{% include "qa/paginator.html" %}
    <div class="row-fluid" >
        <div class="span12 container form-inline">
			<table class="table table-bordered table-striped table-condensed test-list-instance-table">

				<thead>
					<tr>
						<th>Action</th>
						<th class="unit">Unit</th>
						<th class="frequency">Frequency</th>
						<th>Test List/Cycle<div></div></th>
						<th>Work Completed</th>
						<th>Completed By</th>
						<th>Status</th>

					</tr>
					<tr>
						<th>Action</th>
						<th class="unit">Unit</th>
						<th class="frequency">Frequency</th>
						<th>Test List/Cycle<div></div></th>
						<th>Work Completed</th>
						<th>Completed By</th>
						<th>Status</th>
					</tr>
				</thead>
				<tbody>

				{% for instance in test_list_instances %}

					<tr class="{% cycle 'odd' 'even' %} has-due-date">
						<td>
							{% if instance.in_progress %}
								<a class="btn btn-primary btn-mini" title="not implemented yet" href="#" disabled="disabled">Continue QA</a>
							{% else %}
								<a class="btn btn-primary btn-mini" href="{% url review_test_list_instance instance.pk %}">Review</a>
							{% endif %}
						</td>
						<td>{{instance.unit_test_collection.unit.name}}</td>
						<td>{{instance.unit_test_collection.frequency.name}}</td>
						<td><strong>{{instance.test_list.name}}</strong></td>
						<td>
							{% if instance.in_progress %}
								<span data-timestamp="{{0}}">
									<abbr title="Started {{instance.work_started}} by {{instance.created_by}}"><em>In Progress {{instance.work_started}}</em></abbr>
								</span>
							{% else %}
								<span data-timestamp="{{instance.work_completed|date:"U"}}">
									{{instance.work_completed}}
								</span>
							{% endif %}
						</td>
						<td>{{instance.created_by}}</td>
						<td class="pass_fail_status">{{instance|as_pass_fail_status}}</td>
				   </tr>
				{% endfor %}
				</tbody>
				<tfoot>
					<tr>
						<th>Action</th>
						<th class="unit">Unit</th>
						<th class="frequency">Frequency</th>
						<th>Test List/Cycle<div></div></th>
						<th>Work Completed</th>
						<th>Completed By</th>
						<th>Status</th>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	{% include "qa/paginator.html" %}

{% endblock body %}

{% block end_body_extra_script %}
	<script src="{% static "js/testlistinstance.js" %}"></script>
{% endblock end_body_extra_script %}
