{% extends "site_base.html" %}

{% load staticfiles %}

{% block extra_script %}
    <script src="{% static "data_tables/js/jquery.dataTables.js" %}"></script>

	{# http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html #}
    <script src="{% static "data_tables/js/jquery.dataTables.columnFilter.js" %}"></script>
	<script src="{% static "data_tables/js/DT_bootstrap.js" %}"></script>
	<script src="{% static "data_tables/js/DT_sort.js" %}"></script>

	<script src="{% static "js/qautils.js" %}"></script>
	<script src="{% static "js/user_home.js" %}"></script>

{% endblock %}

{% block extra_style %}
    <link href="{% static "css/qa.css" %}" rel="stylesheet">
    <link href="{% static "data_tables/css/DT_bootstrap.css" %}" rel="stylesheet">
{% endblock extra_style %}

{% block body %}
    <div class="row-fluid">
        <div class="span12">
            <h2>
				{% if groups %}
					QA Lists for
					{% for group in groups%}
						{{group.name|title}}{% if not forloop.last %}, {%endif%}
					{% endfor %}
				{% else %}
					All QA Lists
				{%endif%}
			</h2>
        </div>
    </div>
    <div class="row-fluid" >
        <div class="span12 container form-inline">
            <table class="table table-condensed table-bordered table-striped" id="qa-test-list-table">
                <thead>
                    <tr>
						<th>Unit</th>
						<th>Frequency</th>
						<th>Test List</th>
						<th>Last Done</th>
						<th>Due Date</th>
						<th>Perform</th>
					</tr>
                    <tr>
						<th>Unit</th>
						<th>Frequency</th>
						<th>Test List</th>
						<th>Last Done</th>
						<th>Due Date</th>
						<th>Perform</th>
					</tr>
                </thead>

                <tbody>

                    {% for utla in test_list_assignments %}
						<tr class="{% cycle 'odd' 'even' %} has-due-date" data-due="{{due.isoformat}}" data-frequency="{{utl.frequency}}">
							<td>{{utla.unit.name}}</td>
							<td>{{utla.frequency.title}}</td>
							<td>{{utla.tests_object.name}}</td>
							<td>{% if utla.last_done_date %}{{utla.last_done_date}}{%else%}New Test{%endif%}</td>
							<td><span class="label due-status">{% if utla.due_date %}{{utla.due_date}}{%else%}New Test{%endif%}</span></td>
							<td><a href="{%url perform_qa utla.pk%}?day=next">Perform</a></td>
						</tr>
                    {% endfor %}
                </tbody>
				<tfoot>
                    <tr>
						<th>Unit</th>
						<th>Frequency</th>
						<th>Test List</th>
						<th>Last Done</th>
						<th>Due Date</th>
						<th>Perform</th>
					</tr>
				</tfoot>
            </table>
        </div>
    </div>


{% endblock body %}
