{% extends "site_base.html" %}

{% load staticfiles %}

{% block extra_script %}
    <script src="{% static "data_tables/js/jquery.dataTables.js" %}"></script>
    <script src="{% static "data_tables/js/jquery.dataTables.columnFilter.js" %}"></script>
	<script src="{% static "data_tables/js/DT_bootstrap.js" %}"></script>
	<script src="{% static "data_tables/js/DT_sort.js" %}"></script>

	<script src="{% static "js/qautils.js" %}"></script>
	<script src="{% static "js/user_home.js" %}"></script>

{% endblock %}

{% block extra_style %}
    <link href="{% static "css/qa.css" %}" rel="stylesheet">
    <link href="{% static "data_tables/css/DT_bootstrap.css" %}" rel="stylesheet">
{% endblock extra_style %}

{% block body %}
    <div class="row-fluid">
        <div class="span12">
            <h2>{% if group %}{{group.name|title}}{% else %}All{%endif%} QA Lists</h2>
        </div>
    </div>
    <div class="row-fluid" >
        <div class="span12 container form-inline">
            <table class="table table-condensed table-bordered table-striped" id="qa-test-list-table">
                <thead>
                    <tr>
                        {% for header in table_headers %}
							<th>{{header}}</th>
                        {% endfor %}
						<th>Perform</th>
					</tr>
                </thead>

                <tbody>

                    {% for utl, test_list,last_done,due,list_type in test_lists %}
						{% if utl and test_list %}
							<tr class="{% cycle 'odd' 'even' %} has-due-date" data-due="{{due.isoformat}}" data-frequency="{{utl.frequency}}">
								<td>{{utl.unit.name}}</td>
								<td>{{utl.frequency.title}}</td>
								<td>
									{% if list_type = "cycle" %}
										{{test_list.cycle.name}}
									{% else %}
										{{test_list.name}}
									{% endif %}
								</td>
								<td>{% if last_done %}{{last_done}}{%else%}New Test{%endif%}</td>
								<td><span class="label due-status">{% if due %}{{due.date}}{%else%}New Test{%endif%}</span></td>
								<td>
									{% if list_type = "cycle" %}
										<a href="{%url perform_qa frequency=utl.frequency type=list_type pk=test_list.cycle.pk unit_number=utl.unit.number %}?day=next">Perform</a>
									{% else %}
										<a href="{%url perform_qa frequency=utl.frequency type=list_type pk=test_list.pk unit_number=utl.unit.number %}">Perform</a>
									{% endif %}
								</td>
							</tr>
						{% endif %}
                    {% endfor %}
                </tbody>
				<tfoot>
                    <tr>
                        {% for header in table_headers %}
                            <th>{{header}}</th>
                        {% endfor %}
						<th>&nbsp;</th>
					</tr>
				</tfoot>
            </table>
        </div>
    </div>


{% endblock body %}
